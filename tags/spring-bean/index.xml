<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Spring-Bean on gngpp</title>
    <link>https://example.org/tags/spring-bean/</link>
    <description>Recent content in Spring-Bean on gngpp</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Mon, 02 Aug 2021 11:39:34 +0000</lastBuildDate><atom:link href="https://example.org/tags/spring-bean/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>1.Beançš„åŒ…è£…</title>
      <link>https://example.org/posts/spring_analysis/beans/1.bean%E7%9A%84%E5%8C%85%E8%A3%85/</link>
      <pubDate>Mon, 02 Aug 2021 11:39:34 +0000</pubDate>
      
      <guid>https://example.org/posts/spring_analysis/beans/1.bean%E7%9A%84%E5%8C%85%E8%A3%85/</guid>
      <description>1.å‰è¨€ ä¸ºä»€ä¹ˆå…ˆä»å¯¹beançš„åŒ…è£…å¼€å§‹é˜…è¯»æºç å‘¢ï¼Œå› ä¸ºbeansåŒ…çš„æ ¸å¿ƒå°±æ˜¯BeanFactory ğŸ¶ï¼Œå…¶ä½œç”¨å°±æ˜¯å¯¹beanè¿›è¡Œç®¡ç†ï¼Œé‚£ä¹ˆå¯¹beanç®¡ç†çš„å‰æå°±æ˜¯å¯¹beanè¿›è¡Œè§£æï¼Œç„¶åæ”¯æŒå±æ€§çš„set æˆ– get æ“ä½œã€‚é‚£ä¹ˆæˆ‘ä»¬åˆ—ä¸¾ä¸€ä¸‹BeanFactoryçš„ä¸»è¦èŒè´£ï¼Œå³ä½¿æ²¡é˜…è¯»è¿‡æºç ï¼Œä¹Ÿåº”è¯¥çŸ¥é“ä¸ªå¤§æ¦‚è¿‡ç¨‹.
 è§£æxmlæˆ–è€…å…¶å®ƒé…ç½®æ–‡ä»¶å¾—åˆ° BeanDefinition å®ä¾‹åŒ– Instance AutoWiredè‡ªåŠ¨è£…é… Beançš„ä¾èµ–  æ‰€ä»¥ï¼Œæˆ‘ä»¬å…ˆäº†è§£å¦‚ä½•å»å¾—åˆ°ä¸€ä¸ªBeançš„ â€œå®šä¹‰â€ (è§£æxmlé‚£éƒ¨åˆ†å…ˆä¸è®²)
2. BeanWrapperæ¥å£ è¿™ä¸ªç±»çš„ä¸»è¦ä½œç”¨æ˜¯è§£æ`Class` ç„¶åè·å–å±æ€§ï¼Œè¿›ä¸€æ­¥å°è£…ï¼Œç„¶åæä¾›ä¿®æ”¹å±æ€§çš„æ¥å£ public interface BeanWrapper extends ConfigurablePropertyAccessor {  // è®¾ç½®é›†åˆå±æ€§è‡ªå¢é•¿çš„é•¿åº¦ 	void setAutoGrowCollectionLimit(int autoGrowCollectionLimit); 	 // è·å–å½“å‰é›†åˆå±æ€§è‡ªå¢é•¿çš„é•¿åº¦ 	int getAutoGrowCollectionLimit(); 		// è·å–åŒ…è£…çš„Beançš„Instance 	Object getWrappedInstance(); 		// è·å–Beançš„Class 	Class&amp;lt;?&amp;gt; getWrappedClass(); 		// è·å–æ‰€æœ‰å±æ€§æè¿°ç¬¦ 	PropertyDescriptor[] getPropertyDescriptors();   // è·å–å±æ€§æè¿°ç¬¦ 	PropertyDescriptor getPropertyDescriptor(String propertyName) throws InvalidPropertyException;  } ä¸ºä»€ä¹ˆä¸Šé¢ä¼šæ¶‰åŠåˆ°é›†åˆï¼Œå› ä¸ºBean æ”¯æŒnested (åµŒå¥—) å±æ€§è¯»å†™ï¼Œä¹Ÿå°±æ˜¯pojo</description>
    </item>
    
    <item>
      <title>1.factory-method å’Œ factory-beançš„å®ç°åŸç†</title>
      <link>https://example.org/posts/spring_analysis/beans/functionality/1.factory-method%E5%92%8Cfactory-bean-%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/</link>
      <pubDate>Mon, 02 Aug 2021 11:39:34 +0000</pubDate>
      
      <guid>https://example.org/posts/spring_analysis/beans/functionality/1.factory-method%E5%92%8Cfactory-bean-%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/</guid>
      <description>##factory-method å’Œ factory-beançš„å®ç°
åœ¨è®¨è®ºå®ç°åŸç†ä¹‹å‰ï¼Œå¾—å…ˆæ¸…æ¥šæ€ä¹ˆç”¨ï¼Œè¿™ä¸¤ä¸ªä¸œè¥¿.
å‡è®¾ç›®å‰æœ‰ä¸¤ä¸ªç±» ServiceFactory å’Œ Service æˆ‘ä»¬å°±å¯ä»¥æŒ‡å®š factory-method å’Œ factory-bean ç»™ Service
&amp;lt;bean id=&amp;#34;Service&amp;#34; class=&amp;#34;org.springframework.beans.factory.FactoryBeanTests$Service&amp;#34; factory-bean=&amp;#34;ServiceFactoryBean&amp;#34; factory-method=&amp;#34;getObject&amp;#34;&amp;gt;&amp;lt;/bean&amp;gt; 	&amp;lt;bean id=&amp;#34;ServiceFactoryBean&amp;#34; class=&amp;#34;org.springframework.beans.factory.FactoryBeanTests$ServiceFactoryBean&amp;#34; &amp;gt;&amp;lt;/bean&amp;gt; ä¸Šè¿°çš„æ„æ€å°±æ˜¯ï¼Œå½“æˆ‘ä»¬getBean Service çš„æ—¶å€™ï¼Œä¼šä» ServiceFactoryçš„ getObject æ–¹æ³•ä¸­è·å– Service
æ‰€ä»¥åº”è¯¥ä¼šåˆ†æˆä¸¤ä¸ªè¿‡ç¨‹ ï¼š
 å…ˆè·å– ServiceFactory å®ä¾‹ è°ƒç”¨ServiceFactoryçš„ getObject  å®é™…ä¸Šè·å–ä»ServiceFactoryä¸­è·å– Serviceï¼Œå°±ç›¸å½“äºæŠŠ ServiceFactoryå½“æˆæ˜¯ FactoryBean ï¼Œåªæ˜¯è¿™æ ·åšçš„è¯å¯ä»¥å…è®¸ç¨‹åºå‘˜è‡ªå®šä¹‰è‡ªå·±çš„factory-methodç½¢äº†ï¼Œå› ä¸º FactoryBeançš„è¯å°±è¦ç»§æ‰¿æ¥å£ï¼Œå·¥å‚æ–¹æ³•ä¹Ÿå°±è¢«å®šä¸‹æ¥äº†ã€‚
 åŸç†éƒ¨åˆ†
å› ä¸ºè¿™ä¸€å°èŠ‚åªæ˜¯è¯¦è§£ factory-method å’Œ factory-bean çš„åŸç†éƒ¨åˆ†ï¼Œæ‰€ä»¥æºç åªä¼šæˆªå–ä¸€éƒ¨åˆ†ï¼Œè‹¥æƒ³è¦å®Œæ•´ï¼Œé‚£å°±åˆ° beans æ–‡ä»¶å¤¹ä¸­æŸ¥çœ‹è¯¦è§£éƒ¨åˆ†.
protected BeanWrapper createBeanInstance(String beanName, RootBeanDefinition mbd, @Nullable Object[] args) { 	/**------------------------------------------------------------------------------------------------------------ * [DESC] åˆ›å»ºbean å®ä¾‹ * [1] åˆ¤æ–­ç±»æ˜¯ä¸æ˜¯ public * [2] åˆ¤æ–­æ˜¯å¦æä¾›äº†å·¥å‚æ–¹æ³•ï¼Œè‹¥æœ‰ï¼Œåˆ™è°ƒç”¨ {@link #instantiateUsingFactoryMethod} * [3] åˆ¤æ–­æ˜¯å¦æä¾›äº†æ„é€ å‡½æ•°ï¼Œè‹¥æœ‰ï¼Œåˆ™è°ƒç”¨ {@link #autowireConstructor} * [4] ä¸¤è€…éƒ½ä¸æä¾›ï¼Œåˆ™ç›´æ¥è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•° {@link #instantiateBean} *------------------------------------------------------------------------------------------------------------*/  	// ç¡®ä¿classå·²ç»è¢«è§£æ 	Class&amp;lt;?</description>
    </item>
    
    <item>
      <title>2.åµŒå¥—å±æ€§è§£æ</title>
      <link>https://example.org/posts/spring_analysis/beans/2.%E5%B5%8C%E5%A5%97%E5%B1%9E%E6%80%A7%E8%A7%A3%E6%9E%90/</link>
      <pubDate>Mon, 02 Aug 2021 11:39:34 +0000</pubDate>
      
      <guid>https://example.org/posts/spring_analysis/beans/2.%E5%B5%8C%E5%A5%97%E5%B1%9E%E6%80%A7%E8%A7%A3%E6%9E%90/</guid>
      <description>å‰è¨€ åœ¨ä¸Šé¢çš„getPropertyDescriptorä¸­ç”¨åˆ°äº†è¿™ä¸ªæ–¹æ³•å»è§£æ nested åµŒå¥—å±æ€§ï¼Œä¸‹é¢å°±æ¥çœ‹ä¸‹å®ƒæ€ä¹ˆå®ç°çš„
é¦–å…ˆæˆ‘ä»¬å¾—æ˜ç¡®ä¸€ä»¶äº‹æƒ…ï¼ŒBeanWrapperImp ç»§æ‰¿è‡ª AbstractNestablePropertyAccessor å› ä¸º BeanWrapperImp æºå¸¦æœ‰ Instance ï¼Œæ‰€ä»¥ AbstractNestablePropertyAccessor å¿…ç„¶ä¹Ÿæºå¸¦æœ‰ Instance ï¼Œé‚£æŒ‰ç…§æˆ‘ä»¬çš„æ€è·¯è¯¥å¦‚ä½•è§£æ nested å±æ€§å‘¢ï¼Œæ¯”å¦‚ æœ‰ä¸€ä¸ªBean
class Student{  private name;  private Clazz clazzInfo; } class Clazz{  private Integer id; } è¿™ä¸ªæˆ‘ä»¬éœ€è¦å–å‡ºå…¶ClazzIdï¼Œç”¨nested è¡¨ç¤ºå°±æ˜¯ clazzInfo.id ï¼Œé‚£æˆ‘ä»¬è¯¥å¦‚ä½•è§£æï¼Œé¦–å…ˆæ‰¾åˆ°ç¬¬ä¸€ä¸ªå±æ€§
clazzInfoï¼Œç„¶åä»Studentä¸­è·å– clazzInfo çš„Instance ï¼Œç„¶ååœ¨è§£æç¬¬äºŒä¸ªå±æ€§ id ï¼Œç„¶åå†åœ¨classInfo ä¸­æ‹¿åˆ° id çš„å€¼ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸€ä¸ªé€’å½’ã€‚
ä¸‹é¢æ¥çœ‹å®ç°:
protected AbstractNestablePropertyAccessor getPropertyAccessorForPropertyPath(String propertyPath) {  // [1] è§£æå‡ºç¬¬ä¸€ä¸ªå±æ€§çš„åˆ†å‰²ç´¢å¼•  int pos = PropertyAccessorUtils.getFirstNestedPropertySeparatorIndex(propertyPath);  é¦–å…ˆçœ‹ç¬¬ä¸€æ­¥ï¼šPropertyAccessorUtils.getFirstNestedPropertySeparatorIndex
private static int getNestedPropertySeparatorIndex(String propertyPath, boolean last) {  // [1] map[my.</description>
    </item>
    
    <item>
      <title>2.æ³¨è§£@Qualifierå’Œ@Valueçš„å®ç°</title>
      <link>https://example.org/posts/spring_analysis/beans/functionality/2.%E6%B3%A8%E8%A7%A3qualifier%E5%92%8Cvalue%E7%9A%84%E5%AE%9E%E7%8E%B0/</link>
      <pubDate>Mon, 02 Aug 2021 11:39:34 +0000</pubDate>
      
      <guid>https://example.org/posts/spring_analysis/beans/functionality/2.%E6%B3%A8%E8%A7%A3qualifier%E5%92%8Cvalue%E7%9A%84%E5%AE%9E%E7%8E%B0/</guid>
      <description>å‰è¨€ @Qualifierç”¨äºæ³¨è§£åœ¨å±æ€§ã€æ–¹æ³•ã€å‚æ•°ï¼ŒæŒ‡å®šç”¨äºä¿®å¤ä¾èµ–çš„ bean
QualifierAnnotationAutowireCandidateResolverç”¨äºæ”¯æŒ @Qualifierå’Œ @Valueæ³¨è§£
è¿™å¾—åˆ†ä¸¤ç§æƒ…å½¢ï¼Œå¦åˆ™ä¼šå‡ºæ„å¤–çš„BUGå‡ºç° :
 ä»¥byType æ–¹å¼è£…é… ä½¿ç”¨æ³¨è§£ Autowried è£…é…  å½“ä»¥byType æ–¹å¼è£…é…çš„æ—¶å€™ï¼Œ@Qualifier è¦å†™åœ¨setter æ–¹æ³•æˆ–è€…å‚æ•°ä¸Š
å½“ä»¥@Autowriedæ³¨è§£è£…é…ï¼Œåˆ™å†™åœ¨ å±æ€§ ä¸Š
å› ä¸ºbyType æ˜¯ä»¥ setter æ–¹æ³•è¿›è¡Œä¾èµ–ä¿®å¤çš„
@Autowried æ˜¯ä»¥å±æ€§çš„æ–¹å¼è¿›è¡Œä¾èµ–ä¿®å¤
ä¸‹é¢çœ‹æºç ä¸€ç›®äº†ç„¶
protected void autowireByType( 	String beanName, AbstractBeanDefinition mbd, BeanWrapper bw, MutablePropertyValues pvs) { 	// Note æ ¹æ®ç±»å‹æ¥è‡ªåŠ¨è£…é… 	// Note é‚£å°±å¿…ç„¶æ¶‰åŠåˆ°ç±»å‹çš„è½¬æ¢  	// [1] å…ˆnew ä¸€ä¸ªç±»å‹è½¬è½¬æ¢å™¨ 	TypeConverter converter = getCustomTypeConverter(); 	if (converter == null) { 	// å¦‚æœæ²¡æœ‰å°±ç”¨Wrapperå†…ç½®çš„ç±»å‹è½¬æ¢ï¼Œæ”¯æŒåŸºç¡€ç±»å‹ 	converter = bw; 	}  	// [2] éå†å±æ€§å’Œè£…é…äº† 	Set&amp;lt;String&amp;gt; autowiredBeanNames = new LinkedHashSet&amp;lt;&amp;gt;(4);  	// NOTE åœ¨è¿™é‡Œæ’é™¤ä¸€äº›ä¸æ»¡è¶³è£…é…æ¡ä»¶çš„å±æ€§ 	// NOTE ä½¿ç”¨ &amp;lt;property name=&amp;#34;impl1&amp;#34; ref=&amp;#34;BEAN1&amp;#34;/&amp;gt; refå±æ€§å¼•ç”¨çš„beanï¼Œè¿™ä¸ªæ˜¯ä¸ä¼šè¢«è£…é…çš„ 	// NOTE CGLIB å®šä¹‰çš„å±æ€§ä¹Ÿä¸ä¼šè¢«è£…é… 	// NOTE ç®€å•ç±»å‹æ˜¯ä¸ä¼šè¢«è£…é… 	// TODO ä¹‹æ‰€ä»¥ä½¿ç”¨ refæ˜¯å› ä¸ºæ¥è§¦å¾ªç¯ä¾èµ–ï¼Ÿç›®å‰è¿˜ä¸æ¸…æ¥š 	String[] propertyNames = unsatisfiedNonSimpleProperties(mbd, bw); 	for (String propertyName : propertyNames) { 	try {  	// Note ç¬¬ä¸€æ­¥è‚¯å®šæ˜¯è·å–å±æ€§çš„æè¿°ç¬¦ 	PropertyDescriptor pd = bw.</description>
    </item>
    
    <item>
      <title>3.@Autowiredæ³¨è§£å®ç°çš„åŸç†</title>
      <link>https://example.org/posts/spring_analysis/beans/functionality/3.autowired%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%8E%9F%E7%90%86/</link>
      <pubDate>Mon, 02 Aug 2021 11:39:34 +0000</pubDate>
      
      <guid>https://example.org/posts/spring_analysis/beans/functionality/3.autowired%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%8E%9F%E7%90%86/</guid>
      <description>å‰è¨€ @Autowired æ³¨è§£çš„å®ç°åŸç†
ç¬¬äºŒå°èŠ‚è¯´äº†ï¼ŒbyTypeæ˜¯æ ¹æ® method å’ŒmethodParm æ¥è£…é…çš„
åœ¨è¿™é‡Œ @Autowried æ˜¯æ ¹æ® fieldæ¥è¿›è¡Œè£…é…çš„
AutowiredAnnotationBeanPostProcessor è¿™ä¸ªå¤„ç†å™¨æ¥è´Ÿè´£å®ç°@Autowired  æ³¨è§£è£…é…
spring ä¹Ÿæ”¯æŒ JSR330 çš„ Inject æ³¨è§£
å…ˆçœ‹è¿™ä¸ª processor åˆå§‹åŒ–éƒ¨åˆ†
@Override public void postProcessMergedBeanDefinition(RootBeanDefinition beanDefinition, Class&amp;lt;?&amp;gt; beanType, String beanName) {  // [1] é¢„å¤„ç†ï¼Œå‡†å¤‡æ³¨è§£æ•°æ®ï¼Œè¿™ä¸ªåœ¨new instance åè°ƒç”¨  // è°ƒç”¨ä¹‹åæ‰æ˜¯ å¡«å……beanä¾èµ–æ•°æ®  InjectionMetadata metadata = findAutowiringMetadata(beanName, beanType, null);  metadata.checkConfigMembers(beanDefinition); } ç»§ç»­è·Ÿè¿›
private InjectionMetadata findAutowiringMetadata(String beanName, Class&amp;lt;?&amp;gt; clazz, @Nullable PropertyValues pvs) { 	/**------------------------------------------------------------------------------------------------------------ * [DESC] å¯»æ‰¾å­˜åœ¨æ³¨è§£çš„æ–¹æ³•æˆ–è€…å±æ€§ï¼Œå‰ææ˜¯å±æ€§ä¸èƒ½ä¸º static ç±»å‹ NOTE so why?</description>
    </item>
    
    <item>
      <title>3.å¯¹Beanå±æ€§è¿›è¡Œè¯»å–</title>
      <link>https://example.org/posts/spring_analysis/beans/3.%E5%AF%B9bean%E5%B1%9E%E6%80%A7%E8%BF%9B%E8%A1%8C%E8%AF%BB%E5%8F%96/</link>
      <pubDate>Mon, 02 Aug 2021 11:39:34 +0000</pubDate>
      
      <guid>https://example.org/posts/spring_analysis/beans/3.%E5%AF%B9bean%E5%B1%9E%E6%80%A7%E8%BF%9B%E8%A1%8C%E8%AF%BB%E5%8F%96/</guid>
      <description>###å‰è¨€
  æ ¹æ®tokenè·å–è¯¥å±æ€§çš„ Instance
åœ¨ä¸Šé¢ è§£æä¸­ï¼Œæˆ‘ä»¬å·²ç»æ‹¿åˆ°äº†token ï¼Œæˆ‘ä»¬çŸ¥é“ token é‡Œé¢åŒ…å«äº†å±æ€§åå’Œ keys ï¼Œæ¥ä¸‹æ¥å°±èƒ½é€šè¿‡å±æ€§åæ‹¿åˆ°å±æ€§å€¼äº†
 Object value = getPropertyValue(tokens); protected Object getPropertyValue(PropertyTokenHolder tokens) throws BeansException {  String propertyName = tokens.canonicalName;  String actualName = tokens.actualName;  // [1] ç›´æ¥è·å– handler,handlerç”¨äºè®¿é—®å±æ€§  PropertyHandler ph = getLocalPropertyHandler(actualName); ä¸Šé¢æåˆ°è¿‡ï¼ŒPropertyHandler æ˜¯ç”¨äºè®¿é—®å±æ€§çš„ï¼ŒèŒè´£åˆ†ç¦»å˜›ï¼Œæ‰€ä»¥å†æ‹¿åˆ°token åï¼Œå°±å¯ä»¥è·å– Handleräº†ã€‚è¿™ä¸ªæ–¹æ³•çš„å®ç°æ˜¯åœ¨BeanWrapperImpl#getLocalPropertyHandlerä¸­å®ç°çš„ã€‚
protected BeanPropertyHandler getLocalPropertyHandler(String propertyName) {  // [1] å®ç°å¾ˆç®€å•ï¼Œç›´æ¥ä»ç¼“å­˜è·å–å±æ€§æè¿°ç¬¦  PropertyDescriptor pd = getCachedIntrospectionResults().getPropertyDescriptor(propertyName);  return (pd != null ? new BeanPropertyHandler(pd) : null); } å–„ç”¨ç¼“å­˜ï½:happy: ï¼Œè¿˜è®°å¾— getCachedIntrospectionResults è¿™ä¸ªæ–¹æ³•ä¹ˆï¼Œä»ç¼“å­˜æˆ–è€…ä»çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨</description>
    </item>
    
    <item>
      <title>4.å¯¹Beanå±æ€§è¿›è¡Œå†™å…¥</title>
      <link>https://example.org/posts/spring_analysis/beans/4.%E5%AF%B9bean%E5%B1%9E%E6%80%A7%E8%BF%9B%E8%A1%8C%E5%86%99%E5%85%A5/</link>
      <pubDate>Mon, 02 Aug 2021 11:39:34 +0000</pubDate>
      
      <guid>https://example.org/posts/spring_analysis/beans/4.%E5%AF%B9bean%E5%B1%9E%E6%80%A7%E8%BF%9B%E8%A1%8C%E5%86%99%E5%85%A5/</guid>
      <description>å‰è¨€ è¿™ä¸ªå’ŒgetPropertyValue æœ‰å¾ˆå¤šç›¸ä¼¼çš„åœ°æ–¹
 è§£æåµŒå¥—å±æ€§å¾—åˆ° Accessor ç”Ÿæˆ token å®é™…ä¸Šä¹Ÿå°±æ˜¯æ”¯æŒ é›†åˆç±»å‹ ç„¶åè°ƒç”¨ AbstractNestablePropertyAccessor#setProperty  setPropertyValue
public void setPropertyValue(String propertyName, @Nullable Object value) throws BeansException{ 	// [1] è·å–åµŒå¥—å±æ€§ä¸­çš„æœ€åä¸€ä¸ªAccessor 	AbstractNestablePropertyAccessor nestedPa; 	try { 	nestedPa = getPropertyAccessorForPropertyPath(propertyName); 	} 	catch (NotReadablePropertyException ex) { 	throw new NotWritablePropertyException(getRootClass(), this.nestedPath + propertyName, 	&amp;#34;Nested property in path &amp;#39;&amp;#34; + propertyName + &amp;#34;&amp;#39; does not exist&amp;#34;, ex); 	} 	// [2] ç”ŸæˆToken 	PropertyTokenHolder tokens = getPropertyNameTokens(getFinalPath(nestedPa, propertyName));  	// [3] æ ¹æ®Tokenè®¾ç½®å€¼ 	nestedPa.</description>
    </item>
    
    <item>
      <title>5.Beanç±»å‹è½¬æ¢</title>
      <link>https://example.org/posts/spring_analysis/beans/5.%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</link>
      <pubDate>Mon, 02 Aug 2021 11:39:34 +0000</pubDate>
      
      <guid>https://example.org/posts/spring_analysis/beans/5.%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</guid>
      <description>å‰è¨€ ç±»å‹è½¬æ¢åœ¨springä¸­å¾ˆå¸¸ç”¨ï¼Œæ¯”å¦‚è¯´spring beans å°±æˆ‘ä»¬ä¹‹å‰ç ”ç©¶çš„setter/getterå±æ€§ï¼Œè¿˜æœ‰spring mvc çš„å‚æ•°ç»‘å®šï¼Œæˆ–è€…è¯´æ˜¯ i o cè‡ªåŠ¨è£…é…ï¼Œéƒ½ç”¨åˆ°äº†ç±»å‹è½¬æ¢ã€‚ä¸‹é¢æˆ‘ä»¬å°±å•ç‹¬ç ”ç©¶å®ƒ.
å®é™…ä¸Šå®ƒè°ƒç”¨çš„æ˜¯ org.springframework.core.convert ä¸­çš„ DefaultConversionService
å°±ä¸åœ¨è¿™é‡Œè®¨è®ºï¼Œå•ç‹¬è®¨è®º</description>
    </item>
    
    <item>
      <title>6.åˆ›å»ºBeanInstance-æ¦‚è§ˆ</title>
      <link>https://example.org/posts/spring_analysis/beans/6.%E5%88%9B%E5%BB%BAbeaninstance-%E6%A6%82%E8%A7%88/</link>
      <pubDate>Mon, 02 Aug 2021 11:39:34 +0000</pubDate>
      
      <guid>https://example.org/posts/spring_analysis/beans/6.%E5%88%9B%E5%BB%BAbeaninstance-%E6%A6%82%E8%A7%88/</guid>
      <description>å‰è¨€ spring å¯¹ bean çš„æ“ä½œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š
 åˆ›å»º Instance å¡«å…… Instance åˆå§‹åŒ– Bean  æ‰€ä»¥åœ¨è¿™é‡Œå…ˆä»æœ€åŸºæœ¬çš„å¼€å§‹ï¼Œåˆ›å»º Instance
é¦–å…ˆ bean çš„ç±»å‹å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼Œä»…è®¨è®º beans åŒ…ä¸‹ çš„ BeanFactory ï¼š
 singleton prototype  å…ˆè®¨è®º doGetBean ä¹Ÿå°±æ˜¯ æ¢¦å¼€å§‹çš„åœ°æ–¹
protected &amp;lt;T&amp;gt; T doGetBean(final String name, @Nullable final Class&amp;lt;T&amp;gt; requiredType, 	@Nullable final Object[] args, boolean typeCheckOnly) throws BeansException{  	/**------------------------------------------------------------------------------------------------------------- * è°ƒç”¨è€…ï¼š{@link #getBean(String)} ... * * [DESC] è·å–æŒ‡å®šçš„Bean * [1] å…ˆä»Singletonç¼“å­˜ä¸­æŸ¥æ‰¾ï¼Œè‹¥ä¸å­˜åœ¨éå†å…¶çˆ¶å·¥å‚é€’å½’getBean * [2] è°ƒç”¨{@link AbstractAutowireCapableBeanFactory#createBean(String, RootBeanDefinition, Object[])} åˆ›å»ºå®ä¾‹ *-------------------------------------------------------------------------------------------------------------*/   	// è·å–çœŸå®çš„beanåå­—ï¼Œç±»ä¼¼ &amp;amp;BeanName å°±ä¼šè¢«è§£æä¸º BeanNameå°±æ˜¯å»æ‰ &amp;amp; è¿™ä¸ªç¬¦å· 	// ç„¶åä»åˆ«åä¸­è·å–çœŸå®åå­— 	// [TODO] è¿™é‡Œå»æ‰äº† &amp;amp; å¹¶ä¸å½±å“åé¢å¤„ç† FactoryBeanï¼ŒFactoryBeanæ˜¯éœ€è¦æ ¹æ® &amp;amp; è¿™ä¸ªå­—ç¬¦æ¥åˆ¤æ–­çš„ï¼Œåœ¨è¿™é‡Œå»æ‰å¹¶ä¸å½±å“ 	final String beanName = transformedBeanName(name); 	Object bean;  	// [1] ä¼˜å…ˆä»å•ä¾‹ç¼“å­˜ä¸­æŸ¥æ‰¾ 	Object sharedInstance = getSingleton(beanName); 	if (sharedInstance !</description>
    </item>
    
    <item>
      <title>7.åˆ›å»ºBeanInstance-æ ¹æ®å¸¦å‚æ„é€ å‡½æ•°</title>
      <link>https://example.org/posts/spring_analysis/beans/7.%E5%88%9B%E5%BB%BAbeaninstance-%E6%A0%B9%E6%8D%AE%E5%B8%A6%E5%8F%82%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0/</link>
      <pubDate>Mon, 02 Aug 2021 11:39:34 +0000</pubDate>
      
      <guid>https://example.org/posts/spring_analysis/beans/7.%E5%88%9B%E5%BB%BAbeaninstance-%E6%A0%B9%E6%8D%AE%E5%B8%A6%E5%8F%82%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0/</guid>
      <description>å‰è¨€ åœ¨ä¸Šä¸€èŠ‚è®¨è®ºåˆ° ``autowireConstructor åˆ©ç”¨å…¶å®ä¾‹åŒ–Beanï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯é€šè¿‡è°ƒç”¨ä»£å‚æ„é€ å‡½æ•°æ¥æ‹¿åˆ°Instance` çš„ã€‚ä¸å¤šbbï¼Œå¼€æ
protected BeanWrapper autowireConstructor( 	String beanName, RootBeanDefinition mbd, @Nullable Constructor&amp;lt;?&amp;gt;[] ctors, @Nullable Object[] explicitArgs) {  	return new ConstructorResolver(this).autowireConstructor(beanName, mbd, ctors, explicitArgs); 	} ä¸Šé¢ ConstructorResolver è¿™ä¸ªæ˜¯ æ„é€ å‡½æ•°è§£æå™¨ï¼Œæ˜¯beans ä¸­æ¯”è¾ƒé‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œåé¢ä¹Ÿå¸¸å¸¸æ¶‰åŠåˆ°è¿™ä¸ªç±»ï¼Œé‚£ä¹ˆç»§ç»­
è¿™ä¸ªå‡½æ•°é•¿åº¦æ˜¯ 200 æ‰€ä»¥ä¸€ç‚¹ç‚¹åˆ†æï¼Œè¿™æ ·æ¯”è¾ƒæ¸…æ™°
public BeanWrapper autowireConstructor(String beanName, RootBeanDefinition mbd, 	@Nullable Constructor&amp;lt;?&amp;gt;[] chosenCtors, @Nullable Object[] explicitArgs) {  	/**------------------------------------------------------------------------------------------------------------ * [DESC] è§£ææ„é€ å‡½æ•°è¿›è¡Œæ•°æ®è£…é…ç„¶åå®ä¾‹åŒ–å¯¹è±¡ * [1] ç¬¬ä¸€ç§æƒ…å†µå°±æ˜¯åªæœ‰ä¸€ä¸ªæ„é€ å‡½æ•°å¹¶ä¸”æ„é€ å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œè¿™å’Œå·¥å‚æ–¹æ³•æœ‰ç‚¹åƒï¼Œé‚£å°±ç›´æ¥è°ƒç”¨æ— å‚æ„é€ å‡½æ•° * [2] ç¬¬äºŒç§æƒ…å†µï¼Œå°±æ˜¯å¤šä¸ªæ„é€ å‡½æ•°å’Œå¸¦å‚æ•° * å…ˆåˆ¤æ–­æ˜¯ä¸æ˜¯åœ¨æ„é€ å‡½æ•°ä¸Šç”¨äº† {@link ConstructorProperties} æ³¨è§£æ¥æ ‡æ˜æ„é€ å‡½æ•°çš„åç§°ï¼Œè‹¥æ²¡æœ‰æä¾›æ³¨è§£åˆ™ç›´æ¥ä»æ„é€ å‡½æ•°ä¸­è·å–å‚æ•°åç§° * ç„¶åç”¨ {@link #createArgumentArray} å»åŒ¹é…å’Œåˆ›å»ºæ„é€ å‡½æ•°çš„å‚æ•°æ•°ç»„ï¼ŒTODO è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒæ ¸å¿ƒï¼Œæä¾›è®¸å¤šç­–ç•¥å»åŒ¹é…å‚æ•° * [3] æœ€åæ ¹æ®æ„é€ å‡½æ•°çš„æ•°ç»„ ç›´æ¥è°ƒç”¨æ„é€ å‡½æ•° å®ä¾‹åŒ–å¯¹è±¡ *------------------------------------------------------------------------------------------------------------*/ 	BeanWrapperImpl bw = new BeanWrapperImpl(); 	this.</description>
    </item>
    
    <item>
      <title>8.åˆ›å»ºBeanInstance-æ ¹æ®æ— å‚æ„é€ å‡½æ•°</title>
      <link>https://example.org/posts/spring_analysis/beans/8.%E5%88%9B%E5%BB%BAbeaninstance-%E6%A0%B9%E6%8D%AE%E6%97%A0%E5%8F%82%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0/</link>
      <pubDate>Mon, 02 Aug 2021 11:39:34 +0000</pubDate>
      
      <guid>https://example.org/posts/spring_analysis/beans/8.%E5%88%9B%E5%BB%BAbeaninstance-%E6%A0%B9%E6%8D%AE%E6%97%A0%E5%8F%82%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0/</guid>
      <description>å‰è¨€ åˆ©ç”¨æ— å‚æ•°æ„é€ å‡½æ•°åˆ›å»ºBean çš„Instance ï¼Œè¿™ä¸ªæ–¹å¼æ¯”è¾ƒç®€å•ã€‚æ¥ç®€å•çœ‹ä¸€ä¸‹, å…¶å®åœ¨ä¸Šä¸€ç« èŠ‚å·²ç»æ¥è§¦è¿‡äº†ã€‚ã€‚
protected BeanWrapper instantiateBean(final String beanName, final RootBeanDefinition mbd) { 	try { 	Object beanInstance; 	final BeanFactory parent = this; 	if (System.getSecurityManager() != null) { 	beanInstance = AccessController.doPrivileged((PrivilegedAction&amp;lt;Object&amp;gt;) () -&amp;gt; 	getInstantiationStrategy().instantiate(mbd, beanName, parent), 	getAccessControlContext()); 	} 	else { 	beanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent); 	} 	BeanWrapper bw = new BeanWrapperImpl(beanInstance); 	initBeanWrapper(bw); 	return bw; 	} 	catch (Throwable ex) { 	throw new BeanCreationException( 	mbd.</description>
    </item>
    
    <item>
      <title>9.è‡ªåŠ¨è£…é…Instance</title>
      <link>https://example.org/posts/spring_analysis/beans/9.%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8Dinstance/</link>
      <pubDate>Mon, 02 Aug 2021 11:39:34 +0000</pubDate>
      
      <guid>https://example.org/posts/spring_analysis/beans/9.%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8Dinstance/</guid>
      <description>å‰è¨€ æˆ‘ä»¬å·²ç»å®Œæˆäº†åˆ›å»º Instance çš„åˆ†æï¼Œæ¥ä¸‹æ¥å°±åº”è¯¥æ˜¯è‡ªåŠ¨è£…é…ï¼Œåªæœ‰è£…é…å®Œ Bean æ‰èƒ½è¢«ä½¿ç”¨ï¼Œåœ¨è¿™é‡Œå¯èƒ½ä¼šçœ‹åˆ° springæ˜¯å¦‚ä½•è§£å†³ å¾ªç¯ä¾èµ–çš„
protected Object doCreateBean(final String beanName, final RootBeanDefinition mbd, final @Nullable Object[] args) 	throws BeanCreationException {  	/**------------------------------------------------------------------------------------------------------------ * [DESC] è´Ÿè´£åˆ›å»ºBean * [1] å¦‚æœæ˜¯singletonå¯¹è±¡ï¼Œç°åœ¨ç¼“å­˜ä¸­ç§»é™¤ * [2] å¦‚æœä¹‹å‰æ²¡æœ‰åˆ›å»ºè¿‡singletonï¼Œåˆ™è°ƒç”¨ {@link #createBeanInstance} åˆ›å»º * [3] å°†å•ä¾‹æ·»åŠ åˆ°factoryä¸­ï¼Œé¢„å…ˆæš´éœ²beanï¼Œè¿™å¯ä»¥æ”¯æŒspringå»è§£å†³ singletonå¾ªç¯ä¾èµ–é—®é¢˜ * [4] è°ƒç”¨ {@link #populateBean} å¡«å……ä¾èµ–å±æ€§ * [5] è°ƒç”¨ {@link #initializeBean} åˆå§‹åŒ–bean * [6] å¦‚æœBeanå®šä¹‰äº†Dependent-on é‚£å°±ä¿®å¤ ä¾èµ– *------------------------------------------------------------------------------------------------------------*/  	// åˆ›å»ºå‡ºæ¥çš„å®ä¾‹æ˜¯éœ€è¦åŒ…è£…èµ·æ¥ï¼Œç„¶åæ‰èƒ½ä¿®å¤ä¾èµ– 	BeanWrapper instanceWrapper = null;  	// Note [1] å•ä¾‹å¯¹è±¡éœ€è¦ä»ç¼“å­˜ä¸­ç§»é™¤ 	// å¦‚æœä¹‹å‰æ²¡æœ‰åˆ›å»ºè¿‡ï¼Œé‚£æ¥ä¸‹æ¥å°±åˆ›å»ºå®ä¾‹ 	if (mbd.</description>
    </item>
    
  </channel>
</rss>
